<?xml version="1.0" encoding="UTF-8"?>
<svg width="600" height="800" viewBox="0 0 600 800" xmlns="http://www.w3.org/2000/svg">
  <!-- Definiciones -->
  <defs>
    <style>
      .box { fill: #E3F2FD; stroke: #1976D2; stroke-width: 2; }
      .decision { fill: #FFF3E0; stroke: #F57C00; stroke-width: 2; }
      .process { fill: #E8F5E8; stroke: #388E3C; stroke-width: 2; }
      .text { font-family: Arial, sans-serif; font-size: 12px; text-anchor: middle; }
      .arrow { stroke: #333; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333"/>
    </marker>
  </defs>
  
  <!-- Título -->
  <text x="300" y="30" class="text" font-size="16" font-weight="bold">Diagrama de Flujo - Tokenización</text>
  
  <!-- Inicio -->
  <ellipse cx="300" cy="70" rx="60" ry="25" class="box"/>
  <text x="300" y="75" class="text">INICIO</text>
  
  <!-- Entrada de texto -->
  <rect x="220" y="120" width="160" height="40" class="box"/>
  <text x="300" y="135" class="text">Recibir texto de entrada</text>
  <text x="300" y="150" class="text">Inicializar delimitadores</text>
  
  <!-- Inicializar variables -->
  <rect x="220" y="190" width="160" height="40" class="process"/>
  <text x="300" y="205" class="text">i = 0, j = 0</text>
  <text x="300" y="220" class="text">tokens = []</text>
  
  <!-- Condición principal -->
  <polygon points="300,260 350,290 300,320 250,290" class="decision"/>
  <text x="300" y="290" class="text">i ≤ n-1?</text>
  
  <!-- Verificar delimitadores -->
  <polygon points="300,360 380,390 300,420 220,390" class="decision"/>
  <text x="300" y="385" class="text">text[i] es</text>
  <text x="300" y="400" class="text">delimitador?</text>
  
  <!-- Verificar si j también es delimitador -->
  <polygon points="150,460 230,490 150,520 70,490" class="decision"/>
  <text x="150" y="485" class="text">text[j] es</text>
  <text x="150" y="500" class="text">delimitador?</text>
  
  <!-- Incrementar j -->
  <rect x="70" y="560" width="160" height="30" class="process"/>
  <text x="150" y="580" class="text">j = j + 1</text>
  
  <!-- Extraer palabra -->
  <rect x="320" y="460" width="160" height="40" class="process"/>
  <text x="400" y="475" class="text">palabra = text[j:i]</text>
  <text x="400" y="490" class="text">verificar_palabra()</text>
  
  <!-- Verificar si palabra no está vacía -->
  <polygon points="400,530 480,560 400,590 320,560" class="decision"/>
  <text x="400" y="560" class="text">palabra ≠ ""?</text>
  
  <!-- Agregar token -->
  <rect x="320" y="620" width="160" height="30" class="process"/>
  <text x="400" y="640" class="text">tokens.append(palabra)</text>
  
  <!-- Actualizar j -->
  <rect x="320" y="670" width="160" height="30" class="process"/>
  <text x="400" y="690" class="text">j = i + 1</text>
  
  <!-- Incrementar i -->
  <rect x="220" y="730" width="160" height="30" class="process"/>
  <text x="300" y="750" class="text">i = i + 1</text>
  
  <!-- Retornar tokens -->
  <rect x="450" y="320" width="120" height="30" class="box"/>
  <text x="510" y="340" class="text">return tokens</text>
  
  <!-- Fin -->
  <ellipse cx="510" cy="380" rx="40" ry="20" class="box"/>
  <text x="510" y="385" class="text">FIN</text>
  
  <!-- Flechas -->
  <line x1="300" y1="95" x2="300" y2="120" class="arrow"/>
  <line x1="300" y1="160" x2="300" y2="190" class="arrow"/>
  <line x1="300" y1="230" x2="300" y2="260" class="arrow"/>
  <line x1="300" y1="320" x2="300" y2="360" class="arrow"/>
  
  <!-- Sí desde condición principal -->
  <text x="310" y="340" class="text" font-size="10">Sí</text>
  
  <!-- No desde condición principal -->
  <line x1="350" y1="290" x2="450" y2="290" class="arrow"/>
  <line x1="450" y1="290" x2="450" y2="320" class="arrow"/>
  <text x="400" y="285" class="text" font-size="10">No</text>
  
  <!-- Desde verificar delimitadores -->
  <line x1="220" y1="390" x2="150" y2="390" class="arrow"/>
  <line x1="150" y1="390" x2="150" y2="460" class="arrow"/>
  <text x="185" y="385" class="text" font-size="10">Sí</text>
  
  <line x1="380" y1="390" x2="400" y2="390" class="arrow"/>
  <line x1="400" y1="390" x2="400" y2="460" class="arrow"/>
  <text x="390" y="385" class="text" font-size="10">No</text>
  
  <!-- Desde verificar j delimitador -->
  <line x1="150" y1="520" x2="150" y2="560" class="arrow"/>
  <text x="160" y="540" class="text" font-size="10">Sí</text>
  
  <!-- Desde verificar palabra vacía -->
  <line x1="400" y1="590" x2="400" y2="620" class="arrow"/>
  <text x="410" y="610" class="text" font-size="10">Sí</text>
  
  <line x1="400" y1="650" x2="400" y2="670" class="arrow"/>
  <line x1="400" y1="700" x2="400" y2="720" class="arrow"/>
  <line x1="400" y1="720" x2="300" y2="720" class="arrow"/>
  <line x1="300" y1="720" x2="300" y2="730" class="arrow"/>
  
  <!-- Bucle de vuelta -->
  <line x1="150" y1="590" x2="150" y2="720" class="arrow"/>
  <line x1="150" y1="720" x2="220" y2="720" class="arrow"/>
  
  <line x1="300" y1="760" x2="300" y2="780" class="arrow"/>
  <line x1="300" y1="780" x2="50" y2="780" class="arrow"/>
  <line x1="50" y1="780" x2="50" y2="290" class="arrow"/>
  <line x1="50" y1="290" x2="250" y2="290" class="arrow"/>
  
  <!-- Etiquetas adicionales -->
  <text x="320" y="610" class="text" font-size="10">No</text>
  <text x="70" y="540" class="text" font-size="10">No</text>
  
</svg>