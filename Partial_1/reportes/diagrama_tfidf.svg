<?xml version="1.0" encoding="UTF-8"?>
<svg width="700" height="1000" viewBox="0 0 700 1000" xmlns="http://www.w3.org/2000/svg">
  <!-- Definiciones -->
  <defs>
    <style>
      .box { fill: #E3F2FD; stroke: #1976D2; stroke-width: 2; }
      .decision { fill: #FFF3E0; stroke: #F57C00; stroke-width: 2; }
      .process { fill: #E8F5E8; stroke: #388E3C; stroke-width: 2; }
      .text { font-family: Arial, sans-serif; font-size: 11px; text-anchor: middle; }
      .arrow { stroke: #333; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333"/>
    </marker>
  </defs>
  
  <!-- Título -->
  <text x="350" y="30" class="text" font-size="16" font-weight="bold">Diagrama de Flujo - Cálculo TF-IDF</text>
  
  <!-- Inicio -->
  <ellipse cx="350" cy="70" rx="60" ry="25" class="box"/>
  <text x="350" y="75" class="text">INICIO</text>
  
  <!-- Entrada de documentos -->
  <rect x="270" y="120" width="160" height="40" class="box"/>
  <text x="350" y="135" class="text">Recibir corpus de</text>
  <text x="350" y="150" class="text">documentos</text>
  
  <!-- Preprocesar documentos -->
  <rect x="270" y="190" width="160" height="40" class="process"/>
  <text x="350" y="205" class="text">Preprocesar cada</text>
  <text x="350" y="220" class="text">documento</text>
  
  <!-- Crear vocabulario -->
  <rect x="270" y="260" width="160" height="40" class="process"/>
  <text x="350" y="275" class="text">Crear vocabulario único</text>
  <text x="350" y="290" class="text">de todas las palabras</text>
  
  <!-- Inicializar matriz TF -->
  <rect x="270" y="330" width="160" height="40" class="process"/>
  <text x="350" y="345" class="text">Inicializar matriz TF</text>
  <text x="350" y="360" class="text">[docs x vocab]</text>
  
  <!-- Bucle documentos TF -->
  <rect x="270" y="400" width="160" height="30" class="process"/>
  <text x="350" y="420" class="text">Para cada documento i:</text>
  
  <!-- Calcular TF -->
  <rect x="270" y="460" width="160" height="50" class="process"/>
  <text x="350" y="475" class="text">TF(t,d) = count(t,d) /</text>
  <text x="350" y="490" class="text">total_words(d)</text>
  <text x="350" y="505" class="text">Llenar matriz TF</text>
  
  <!-- Inicializar vector IDF -->
  <rect x="270" y="540" width="160" height="40" class="process"/>
  <text x="350" y="555" class="text">Inicializar vector IDF</text>
  <text x="350" y="570" class="text">[vocab_size]</text>
  
  <!-- Bucle vocabulario IDF -->
  <rect x="270" y="610" width="160" height="30" class="process"/>
  <text x="350" y="630" class="text">Para cada término t:</text>
  
  <!-- Calcular IDF -->
  <rect x="270" y="670" width="160" height="60" class="process"/>
  <text x="350" y="685" class="text">df(t) = docs que</text>
  <text x="350" y="700" class="text">contienen t</text>
  <text x="350" y="715" class="text">IDF(t) = log(N/df(t))</text>
  
  <!-- Inicializar matriz TF-IDF -->
  <rect x="270" y="760" width="160" height="40" class="process"/>
  <text x="350" y="775" class="text">Inicializar matriz</text>
  <text x="350" y="790" class="text">TF-IDF [docs x vocab]</text>
  
  <!-- Calcular TF-IDF -->
  <rect x="270" y="830" width="160" height="50" class="process"/>
  <text x="350" y="845" class="text">Para cada celda:</text>
  <text x="350" y="860" class="text">TF-IDF(t,d) =</text>
  <text x="350" y="875" class="text">TF(t,d) × IDF(t)</text>
  
  <!-- Retornar resultado -->
  <rect x="470" y="400" width="160" height="50" class="box"/>
  <text x="550" y="415" class="text">return:</text>
  <text x="550" y="430" class="text">- Matriz TF-IDF</text>
  <text x="550" y="445" class="text">- Vocabulario</text>
  
  <!-- Fin -->
  <ellipse cx="550" cy="500" rx="40" ry="20" class="box"/>
  <text x="550" y="505" class="text">FIN</text>
  
  <!-- Procesos paralelos -->
  <rect x="50" y="460" width="160" height="40" class="process"/>
  <text x="130" y="475" class="text">Contar frecuencia de</text>
  <text x="130" y="490" class="text">cada palabra</text>
  
  <rect x="50" y="670" width="160" height="40" class="process"/>
  <text x="130" y="685" class="text">Contar documentos</text>
  <text x="130" y="700" class="text">que contienen término</text>
  
  <!-- Flechas principales -->
  <line x1="350" y1="95" x2="350" y2="120" class="arrow"/>
  <line x1="350" y1="160" x2="350" y2="190" class="arrow"/>
  <line x1="350" y1="230" x2="350" y2="260" class="arrow"/>
  <line x1="350" y1="300" x2="350" y2="330" class="arrow"/>
  <line x1="350" y1="370" x2="350" y2="400" class="arrow"/>
  <line x1="350" y1="430" x2="350" y2="460" class="arrow"/>
  <line x1="350" y1="510" x2="350" y2="540" class="arrow"/>
  <line x1="350" y1="580" x2="350" y2="610" class="arrow"/>
  <line x1="350" y1="640" x2="350" y2="670" class="arrow"/>
  <line x1="350" y1="730" x2="350" y2="760" class="arrow"/>
  <line x1="350" y1="800" x2="350" y2="830" class="arrow"/>
  
  <!-- Hacia resultado -->
  <line x1="350" y1="880" x2="350" y2="920" class="arrow"/>
  <line x1="350" y1="920" x2="470" y2="920" class="arrow"/>
  <line x1="470" y1="920" x2="470" y2="425" class="arrow"/>
  
  <!-- Hacia fin -->
  <line x1="550" y1="450" x2="550" y2="480" class="arrow"/>
  
  <!-- Conexiones a procesos paralelos -->
  <line x1="270" y1="480" x2="210" y2="480" class="arrow"/>
  <line x1="210" y1="480" x2="210" y2="480" class="arrow"/>
  
  <line x1="270" y1="690" x2="210" y2="690" class="arrow"/>
  <line x1="210" y1="690" x2="210" y2="690" class="arrow"/>
  
  <!-- Etiquetas de fórmulas -->
  <text x="500" y="480" class="text" font-size="10" font-style="italic">TF = Frecuencia del término</text>
  <text x="500" y="495" class="text" font-size="10" font-style="italic">IDF = Frecuencia inversa del documento</text>
  <text x="500" y="510" class="text" font-size="10" font-style="italic">N = Total de documentos</text>
  
</svg>